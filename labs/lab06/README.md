# OSPF

## Цель: Настроить OSPF офисе Москва. Разделить сеть на зоны. Настроить фильтрацию между зонами.

  1. Маршрутизаторы R14-R15 находятся в зоне 0 - backbone
  2. Маршрутизаторы R12-R13 находятся в зоне 10. Дополнительно к маршрутам должны получать маршрут по-умолчанию
  3. Маршрутизатор R19 находится в зоне 101 и получает только маршрут по умолчанию
  4. Маршрутизатор R20 находится в зоне 102 и получает все маршруты, кроме маршрутов до сетей зоны 101
  5. Настройка для IPv6 повторяет логику IPv4
  6. План работы и изменения зафиксированы в документации

## Решение:

1. Предоставим таблицы стыковочных сетей, выделенных IP-адресов, схему и конфигурации оборудования. 
  
1.1 Таблица стыковочных сетей.
  
1.2 Таблица выделенных IP-адресов.
  
1.3 Схема.
  
1.4 Конфигурации оборудования.

2. Настроим R14, R15, R12 и R13 в Area 0 и пропишем маршрут по-умолчанию на R14, R15 с приоритетом на R15.

3. Настроим R12 и R13 в Area 10 и проверим получение маршрута по-умолчанию.

4. Настроим R19 в Area 101 и проверим, что он олучает только маршрут по умолчанию.

5. Настройка Area 102 и проверка, что R20 получает все маршруты, кроме маршрутов до сетей зоны 101.

5.1 Добавим на `router ospf 1` `filter-list` на R15, что бы блокировать маршруты сетей зоны 101 и проверим, что он получает все маршруты, кроме маршрутов до сетей зоны 101.

5.2 Добавим на ipv6 `router ospf 1` `distribute-list` на R20, что бы блокировать маршруты сетей зоны 101 и проверим, что он получает все маршруты, кроме маршрутов до сетей зоны 101. Т.к. `filter-list` для ipv6 на EVE-NG походу не поддерживается.

### Часть 1: Предоставим таблицы стыковочных сетей, выделенных IP-адресов, схему и конфигурации оборудования. 

#### 1.1 Таблица стыковочных сетей.

Name|Port|Protocol|Address|Network|Description
----|----|--------|-------|-------|-----------
R14|e0/0|IPv4|1.1.1.5|1.1.1.4/30|to R12
R14|e0/0|IPv6|ac10:ffff:0:1021::1/64|ac10:ffff:0:1021::/64|to R12
R14|e0/1|IPv4|1.1.1.9|1.1.1.8/30|to R13
R14|e0/1|IPv6|ac10:ffff:0:1031::1/64|ac10:ffff:0:1031::/64|to R13
R14|e0/2|IPv4|1.1.0.2|1.1.0.0/30|to R22
R14|e0/2|IPv6|ac10:ffff:0:1::2/64|ac10:ffff:0:1::/64|to R22
R14|e0/3|IPv4|1.1.1.1|1.1.1.0/30|to R19
R14|e0/3|IPv6|ac10:ffff:0:1011::1/64|ac10:ffff:0:1011::/64|to R19
R15|e0/0|IPv4|1.1.1.17|1.1.1.16/30|to R13
R15|e0/0|IPv6|ac10:ffff:0:1051::1/64|ac10:ffff:0:1051::/64|to R13
R15|e0/1|IPv4|1.1.1.13|1.1.1.12/30|to R12
R15|e0/1|IPv6|ac10:ffff:0:1041::1/64|ac10:ffff:0:1041::/64|to R12
R15|e0/2|IPv4|1.1.0.6|1.1.0.4/30|to R21
R15|e0/2|IPv6|ac10:ffff:0:2::2/64|ac10:ffff:0:2::/64|to R21
R15|e0/3|IPv4|1.1.1.21|1.1.1.20/30|to R20
R15|e0/3|IPv6|ac10:ffff:0:1061::1/64|ac10:ffff:0:1061::/64|to R20
R19|e0/0|IPv4|1.1.1.2|1.1.1.0/30|to R14
R19|e0/0|IPv6|ac10:ffff:0:1011::2/64|ac10:ffff:0:1011::/64|to R14
R12|e0/1|IPv4|1.1.1.25|1.1.1.24/30|to R13
R12|e0/1|IPv6|ac10:ffff:0:1071::1/64|ac10:ffff:0:1071::/64|to R13
R12|e0/2|IPv4|1.1.1.6|1.1.1.4/30|to R14
R12|e0/2|IPv6|ac10:ffff:0:1021::2/64|ac10:ffff:0:1021::/64|to R14
R12|e0/3|IPv4|1.1.1.14|1.1.1.12/30|to R15
R12|e0/3|IPv6|ac10:ffff:0:1041::2/64|ac10:ffff:0:1041::/64|to R15
R13|e0/1|IPv4|1.1.1.26|1.1.1.24/30|to R12
R13|e0/1|IPv6|ac10:ffff:0:1071::2/64|ac10:ffff:0:1071::/64|to R12
R13|e0/2|IPv4|1.1.1.18|1.1.1.16/30|to R15
R13|e0/2|IPv6|ac10:ffff:0:1051::2/64|ac10:ffff:0:1051::/64|to R15
R13|e0/3|IPv4|1.1.1.10|1.1.1.8/30|to R14
R13|e0/3|IPv6|ac10:ffff:0:1031::2/64|ac10:ffff:0:1031::/64|to R14
R20|e0/0|IPv4|1.1.1.22|1.1.1.20/30|to R15
R20|e0/0|IPv6|ac10:ffff:0:1061::2/64|ac10:ffff:0:1061::/64|to R15

#### 1.2 Таблица выделенных IP-адресов.

Name|Port|Protocol|Address|Network|Description
----|----|--------|-------|-------|-----------
R14|Lo0|IPv4|172.16.0.14/32|172.16.0.0/24|Сеть управления Москва
R14|Lo0|IPv6|ac10:ffff:0:10a1::14/128|ac10:ffff:0:10a1::/64|Сеть управления Москва
R15|Lo0|IPv4|172.16.0.15/32|172.16.0.0/24|Сеть управления Москва
R15|Lo0|IPv6|ac10:ffff:0:10a1::15/128|ac10:ffff:0:10a1::/64|Сеть управления Москва
R19|Lo0|IPv4|172.16.0.19/32|172.16.0.0/24|Сеть управления Москва
R19|Lo0|IPv6|ac10:ffff:0:10a1::19/128|ac10:ffff:0:10a1::/64|Сеть управления Москва
R20|Lo0|IPv4|172.16.0.20/32|172.16.0.0/24|Сеть управления Москва
R20|Lo0|IPv6|ac10:ffff:0:10a1::20/128|ac10:ffff:0:10a1::/64|Сеть управления Москва
R12|e0/0.10|IPv4|172.16.0.12/24|172.16.0.0/24|Сеть управления Москва
R12|e0/0.10 (HSRP)|IPv4|172.16.0.1/24|172.16.0.0/24|Сеть управления Москва
R12|e0/0.10|IPv6|ac10:ffff:0:10a1::12/64|ac10:ffff:0:10a1::/64|Сеть управления Москва
R12|e0/0.10 (HSRP)|IPv6|autoconfig|ac10:ffff:0:10a1::/64|Сеть управления Москва
R12|e0/0.11|IPv4|192.168.0.3/24|192.168.0.0/24|Пользовательская сеть  Москва для VPC1
R12|e0/0.11 (HSRP)|IPv4|192.168.0.1/24|192.168.0.0/24|Пользовательская сеть  Москва для VPC1
R12|e0/0.11|IPv6|ac10:ffff:0:10b1::12/64|ac10:ffff:0:10b1::/64|Пользовательская сеть  Москва для VPC1
R12|e0/0.11 (HSRP)|IPv6|autoconfig|ac10:ffff:0:10b1::/64|Пользовательская сеть  Москва для VPC1
R12|e0/0.12|IPv4|192.168.1.3/24|192.168.1.0/24|Пользовательская сеть  Москва для VPC7
R12|e0/0.12 (HSRP)|IPv4|192.168.1.1/24|192.168.1.0/24|Пользовательская сеть  Москва для VPC7
R12|e0/0.12|IPv6|ac10:ffff:0:10c1::12/64|ac10:ffff:0:10c1::/64|Пользовательская сеть  Москва для VPC7
R12|e0/0.12 (HSRP)|IPv6|autoconfig|ac10:ffff:0:10c1::/64|Пользовательская сеть  Москва для VPC7
R13|e0/0.10|IPv4|172.16.0.13/24|172.16.0.0/24|Сеть управления Москва
R13|e0/0.10 (HSRP)|IPv4|172.16.0.1/24|172.16.0.0/24|Сеть управления Москва
R13|e0/0.10|IPv6|ac10:ffff:0:10a1::13/64|ac10:ffff:0:10a1::/64|Сеть управления Москва
R13|e0/0.10 (HSRP)|IPv6|autoconfig|ac10:ffff:0:10a1::/64|Сеть управления Москва
R13|e0/0.11|IPv4|192.168.0.2/24|192.168.0.0/24|Пользовательская сеть  Москва для VPC1
R13|e0/0.11 (HSRP)|IPv4|192.168.0.1/24|192.168.0.0/24|Пользовательская сеть  Москва для VPC1
R13|e0/0.11|IPv6|ac10:ffff:0:10b1::13/64|ac10:ffff:0:10b1::/64|Пользовательская сеть  Москва для VPC1
R13|e0/0.11 (HSRP)|IPv6|autoconfig|ac10:ffff:0:10b1::/64|Пользовательская сеть  Москва для VPC1
R13|e0/0.12|IPv4|192.168.1.2/24|192.168.1.0/24|Пользовательская сеть  Москва для VPC7
R13|e0/0.12 (HSRP)|IPv4|192.168.1.1/24|192.168.1.0/24|Пользовательская сеть  Москва для VPC7
R13|e0/0.12|IPv6|ac10:ffff:0:10c1::13/64|ac10:ffff:0:10c1::/64|Пользовательская сеть  Москва для VPC7
R13|e0/0.12 (HSRP)|IPv6|autoconfig|ac10:ffff:0:10c1::/64|Пользовательская сеть  Москва для VPC7

#### 1.3 Схема.

![](https://github.com/irvin232/OTUS-network-engineer/blob/master/labs/lab06/lab06.png)

#### 1.4 Конфигурации оборудования.

[Итоговые конфигурации оборудования](https://github.com/irvin232/OTUS-network-engineer/tree/master/labs/lab06/Configs).

### Часть 2: Настроим R14, R15, R12 и R13 в Area 0 и пропишем маршрут по-умолчанию на R14, R15 с приоритетом на R15.

R15
```
router ospf 1
 router-id 15.15.15.15
 default-information originate
exit
ipv6 router ospf 1
 router-id 15.15.15.15
 default-information originate
ip route 0.0.0.0 0.0.0.0 1.1.0.5 105
ipv6 route ::/0 AC10:FFFF:0:2::1 105
```
R14
```
router ospf 1
 router-id 14.14.14.14
 default-information originate
exit
ipv6 router ospf 1
 router-id 14.14.14.14
 default-information originate
ip route 0.0.0.0 0.0.0.0 1.1.0.5
ipv6 route ::/0 AC10:FFFF:0:2::1
```
R12
```
router ospf 1
 router-id 12.12.12.12
exit
ipv6 router ospf 1
 router-id 12.12.12.12
exit
interface Ethernet0/2
 ip ospf 1 area 0
 ipv6 ospf 1 area 0
 exit
 interface Ethernet0/3
 ip ospf 1 area 0
 ipv6 ospf 1 area 0
 exit
 ```
 R13
 ```
router ospf 1
 router-id 13.13.13.13
exit
ipv6 router ospf 1
 router-id 13.13.13.13
exit
interface Ethernet0/2
 ip ospf 1 area 0
 ipv6 ospf 1 area 0
 exit
 interface Ethernet0/3
 ip ospf 1 area 0
 ipv6 ospf 1 area 0
 exit
 ```
